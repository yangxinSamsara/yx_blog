(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{454:function(t,s,a){"use strict";a.r(s);var r=a(34),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ä¸ºä»€ä¹ˆ-vue-ä¸­ä¸è¦ç”¨-index-ä½œä¸º-key-diff-ç®—æ³•è¯¦è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆ-vue-ä¸­ä¸è¦ç”¨-index-ä½œä¸º-key-diff-ç®—æ³•è¯¦è§£"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆ Vue ä¸­ä¸è¦ç”¨ index ä½œä¸º keyï¼Ÿï¼ˆdiff ç®—æ³•è¯¦è§£ï¼‰")]),t._v(" "),a("p",[t._v("æ˜é‡‘ï¼šhttps://juejin.cn/post/6844904113587634184")]),t._v(" "),a("h2",{attrs:{id:"ç¤ºä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[t._v("#")]),t._v(" ç¤ºä¾‹")]),t._v(" "),a("p",[t._v("ä»¥è¿™æ ·ä¸€ä¸ªåˆ—è¡¨ä¸ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("é‚£ä¹ˆå®ƒçš„ "),a("code",[t._v("vnode")]),t._v(" ä¹Ÿå°±æ˜¯è™šæ‹Ÿ dom èŠ‚ç‚¹å¤§æ¦‚æ˜¯è¿™æ ·çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å‡è®¾æ›´æ–°ä»¥åï¼Œæˆ‘ä»¬æŠŠå­èŠ‚ç‚¹çš„é¡ºåºè°ƒæ¢äº†ä¸€ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œçš„ "),a("code",[t._v("children")]),t._v(" éƒ¨åˆ†æ˜¯æˆ‘ä»¬æœ¬æ–‡ "),a("code",[t._v("diff")]),t._v(" ç®—æ³•è¦è®²çš„é‡ç‚¹ï¼ˆæ•²é»‘æ¿ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆå“åº”å¼æ•°æ®æ›´æ–°åï¼Œè§¦å‘äº† "),a("code",[t._v("æ¸²æŸ“ Watcher")]),t._v("  çš„å›è°ƒå‡½æ•° "),a("code",[t._v("vm._update(vm._render())")]),t._v("å»é©±åŠ¨è§†å›¾æ›´æ–°ï¼Œ")]),t._v(" "),a("p",[a("code",[t._v("vm._render()")]),t._v(" å…¶å®ç”Ÿæˆçš„å°±æ˜¯ "),a("code",[t._v("vnode")]),t._v("ï¼Œè€Œ "),a("code",[t._v("vm._update")]),t._v(" å°±ä¼šå¸¦ç€æ–°çš„ "),a("code",[t._v("vnode")]),t._v(" å»èµ°è§¦å‘ "),a("code",[t._v("__patch__")]),t._v(" è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ç›´æ¥è¿›å…¥ "),a("code",[t._v("ul")]),t._v(" è¿™ä¸ª "),a("code",[t._v("vnode")]),t._v(" çš„ "),a("code",[t._v("patch")]),t._v(" è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("å¯¹æ¯”æ–°æ—§èŠ‚ç‚¹æ˜¯å¦æ˜¯ç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼š")]),t._v(" "),a("h2",{attrs:{id:"_1-ä¸æ˜¯ç›¸åŒèŠ‚ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸æ˜¯ç›¸åŒèŠ‚ç‚¹"}},[t._v("#")]),t._v(" 1. ä¸æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼š")]),t._v(" "),a("p",[a("code",[t._v("isSameNode")]),t._v("ä¸ºfalseçš„è¯ï¼Œç›´æ¥é”€æ¯æ—§çš„ "),a("code",[t._v("vnode")]),t._v("ï¼Œæ¸²æŸ“æ–°çš„ "),a("code",[t._v("vnode")]),t._v("ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ "),a("code",[t._v("diff")]),t._v(" æ˜¯åŒå±‚å¯¹æ¯”ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_2-æ˜¯ç›¸åŒèŠ‚ç‚¹-è¦å°½å¯èƒ½çš„åšèŠ‚ç‚¹çš„å¤ç”¨-éƒ½æ˜¯-ul-è¿›å…¥ğŸ‘ˆ-ã€‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ˜¯ç›¸åŒèŠ‚ç‚¹-è¦å°½å¯èƒ½çš„åšèŠ‚ç‚¹çš„å¤ç”¨-éƒ½æ˜¯-ul-è¿›å…¥ğŸ‘ˆ-ã€‚"}},[t._v("#")]),t._v(" 2. æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œè¦å°½å¯èƒ½çš„åšèŠ‚ç‚¹çš„å¤ç”¨ï¼ˆéƒ½æ˜¯ "),a("code",[t._v("ul")]),t._v("ï¼Œè¿›å…¥ğŸ‘ˆï¼‰ã€‚")]),t._v(" "),a("p",[t._v("ä¼šè°ƒç”¨"),a("code",[t._v("src/core/vdom/patch.js")]),t._v("ä¸‹çš„"),a("code",[t._v("patchVNode")]),t._v("æ–¹æ³•ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å¦‚æœæ–°-vnode-æ˜¯æ–‡å­—-vnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚æœæ–°-vnode-æ˜¯æ–‡å­—-vnode"}},[t._v("#")]),t._v(" å¦‚æœæ–° vnode æ˜¯æ–‡å­— vnode")]),t._v(" "),a("p",[t._v("å°±ç›´æ¥è°ƒç”¨æµè§ˆå™¨çš„ "),a("code",[t._v("dom api")]),t._v(" æŠŠèŠ‚ç‚¹çš„ç›´æ¥æ›¿æ¢æ‰æ–‡å­—å†…å®¹å°±å¥½ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å¦‚æœæ–°-vnode-ä¸æ˜¯æ–‡å­—-vnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚æœæ–°-vnode-ä¸æ˜¯æ–‡å­—-vnode"}},[t._v("#")]),t._v(" å¦‚æœæ–° vnode ä¸æ˜¯æ–‡å­— vnode")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆå°±è¦å¼€å§‹å¯¹å­èŠ‚ç‚¹ "),a("code",[t._v("children")]),t._v(" è¿›è¡Œå¯¹æ¯”äº†ã€‚ï¼ˆå¯ä»¥ç±»æ¯” "),a("code",[t._v("ul")]),t._v(" ä¸­çš„ "),a("code",[t._v("li")]),t._v(" å­å…ƒç´ ï¼‰ã€‚")]),t._v(" "),a("h4",{attrs:{id:"å¦‚æœæœ‰æ–°-children-è€Œæ²¡æœ‰æ—§-children"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚æœæœ‰æ–°-children-è€Œæ²¡æœ‰æ—§-children"}},[t._v("#")]),t._v(" å¦‚æœæœ‰æ–° children è€Œæ²¡æœ‰æ—§ children")]),t._v(" "),a("p",[t._v("è¯´æ˜æ˜¯æ–°å¢ childrenï¼Œç›´æ¥ "),a("code",[t._v("addVnodes")]),t._v(" æ·»åŠ æ–°å­èŠ‚ç‚¹ã€‚")]),t._v(" "),a("h4",{attrs:{id:"å¦‚æœæœ‰æ—§-children-è€Œæ²¡æœ‰æ–°-children"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚æœæœ‰æ—§-children-è€Œæ²¡æœ‰æ–°-children"}},[t._v("#")]),t._v(" å¦‚æœæœ‰æ—§ children è€Œæ²¡æœ‰æ–° children")]),t._v(" "),a("p",[t._v("è¯´æ˜æ˜¯åˆ é™¤ childrenï¼Œç›´æ¥ "),a("code",[t._v("removeVnodes")]),t._v(" åˆ é™¤æ—§å­èŠ‚ç‚¹")]),t._v(" "),a("h4",{attrs:{id:"å¦‚æœæ–°æ—§-children-éƒ½å­˜åœ¨-éƒ½å­˜åœ¨-li-å­èŠ‚ç‚¹åˆ—è¡¨-è¿›å…¥ğŸ‘ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚æœæ–°æ—§-children-éƒ½å­˜åœ¨-éƒ½å­˜åœ¨-li-å­èŠ‚ç‚¹åˆ—è¡¨-è¿›å…¥ğŸ‘ˆ"}},[t._v("#")]),t._v(" å¦‚æœæ–°æ—§ children éƒ½å­˜åœ¨ï¼ˆéƒ½å­˜åœ¨ "),a("code",[t._v("li å­èŠ‚ç‚¹åˆ—è¡¨")]),t._v("ï¼Œè¿›å…¥ğŸ‘ˆï¼‰")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆå°±æ˜¯æˆ‘ä»¬ "),a("code",[t._v("diffç®—æ³•")]),t._v(" æƒ³è¦è€ƒå¯Ÿçš„æœ€æ ¸å¿ƒçš„ç‚¹äº†ï¼Œä¹Ÿå°±æ˜¯æ–°æ—§èŠ‚ç‚¹çš„ "),a("code",[t._v("diff")]),t._v(" è¿‡ç¨‹ã€‚")]),t._v(" "),a("p",[t._v("å¯ä»¥æ‰“å¼€æºç ä»“åº“é‡Œå¤§è‡´çœ‹ä¸‹è¿™ä¸ªå‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šé€æ­¥è®²è§£ã€‚")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue%2Fblob%2Fbd6cea0973247e2a8e1d4a2250614c0bf44f0b26%2Fsrc%2Fcore%2Fvdom%2Fpatch.js%23L404-L474",target:"_blank",rel:"noopener noreferrer"}},[t._v("updateChildren"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("é€šè¿‡")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ—§é¦–èŠ‚ç‚¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°é¦–èŠ‚ç‚¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ—§å°¾èŠ‚ç‚¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°å°¾èŠ‚ç‚¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("è¿™äº›å˜é‡åˆ†åˆ«æŒ‡å‘"),a("code",[t._v("æ—§èŠ‚ç‚¹çš„é¦–å°¾")]),t._v("ã€"),a("code",[t._v("æ–°èŠ‚ç‚¹çš„é¦–å°¾")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æ ¹æ®è¿™äº›æŒ‡é’ˆï¼Œåœ¨ä¸€ä¸ª "),a("code",[t._v("while")]),t._v(" å¾ªç¯ä¸­ä¸åœçš„å¯¹æ–°æ—§èŠ‚ç‚¹çš„ä¸¤ç«¯çš„è¿›è¡Œå¯¹æ¯”ï¼Œç„¶åæŠŠä¸¤ç«¯çš„æŒ‡é’ˆå‘ä¸æ–­å†…éƒ¨æ”¶ç¼©ï¼Œç›´åˆ°æ²¡æœ‰èŠ‚ç‚¹å¯ä»¥å¯¹æ¯”ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è®²å¯¹æ¯”è¿‡ç¨‹ä¹‹å‰ï¼Œè¦è®²ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å‡½æ•°ï¼š"),a("code",[t._v("sameVnode")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameVnode")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n        a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isComment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isComment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameInputType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å®ƒæ˜¯ç”¨æ¥åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å¯ç”¨çš„å…³é”®å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ "),a("code",[t._v("sameVnode")]),t._v("ï¼Œä¼ é€’ç»™èŠ‚ç‚¹çš„ "),a("code",[t._v("key")]),t._v(" æ˜¯å…³é”®ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åæˆ‘ä»¬æ¥ç€è¿›å…¥ "),a("code",[t._v("diff")]),t._v(" è¿‡ç¨‹ï¼Œæ¯ä¸€è½®éƒ½æ˜¯åŒæ ·çš„å¯¹æ¯”ï¼Œå…¶ä¸­æŸä¸€é¡¹å‘½ä¸­äº†ï¼Œå°±é€’å½’çš„è¿›å…¥ "),a("code",[t._v("patchVnode")]),t._v(" é’ˆå¯¹å•ä¸ª "),a("code",[t._v("vnode")]),t._v(" è¿›è¡Œçš„è¿‡ç¨‹ï¼ˆå¦‚æœè¿™ä¸ª "),a("code",[t._v("vnode")]),t._v(" åˆæœ‰ "),a("code",[t._v("children")]),t._v("ï¼Œé‚£ä¹ˆè¿˜ä¼šæ¥åˆ°è¿™ä¸ª "),a("code",[t._v("diff children")]),t._v(" çš„è¿‡ç¨‹ ï¼‰ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("æ—§é¦–èŠ‚ç‚¹å’Œæ–°é¦–èŠ‚ç‚¹ç”¨ "),a("code",[t._v("sameNode")]),t._v(" å¯¹æ¯”ã€‚")]),t._v(" "),a("li",[t._v("æ—§å°¾èŠ‚ç‚¹å’Œæ–°å°¾èŠ‚ç‚¹ç”¨ "),a("code",[t._v("sameNode")]),t._v(" å¯¹æ¯”")]),t._v(" "),a("li",[t._v("æ—§é¦–èŠ‚ç‚¹å’Œæ–°å°¾èŠ‚ç‚¹ç”¨ "),a("code",[t._v("sameNode")]),t._v(" å¯¹æ¯”")]),t._v(" "),a("li",[t._v("æ—§å°¾èŠ‚ç‚¹å’Œæ–°é¦–èŠ‚ç‚¹ç”¨ "),a("code",[t._v("sameNode")]),t._v(" å¯¹æ¯”")]),t._v(" "),a("li",[t._v("å¦‚æœä»¥ä¸Šé€»è¾‘éƒ½åŒ¹é…ä¸åˆ°ï¼Œå†æŠŠæ‰€æœ‰æ—§å­èŠ‚ç‚¹çš„ "),a("code",[t._v("key")]),t._v(" åšä¸€ä¸ªæ˜ å°„åˆ°æ—§èŠ‚ç‚¹ä¸‹æ ‡çš„ "),a("code",[t._v("key -> index")]),t._v(" è¡¨ï¼Œç„¶åç”¨æ–° "),a("code",[t._v("vnode")]),t._v(" çš„ "),a("code",[t._v("key")]),t._v(" å»æ‰¾å‡ºåœ¨æ—§èŠ‚ç‚¹ä¸­å¯ä»¥å¤ç”¨çš„ä½ç½®ã€‚")])]),t._v(" "),a("p",[t._v("ç„¶åä¸åœçš„æŠŠåŒ¹é…åˆ°çš„æŒ‡é’ˆå‘å†…éƒ¨æ”¶ç¼©ï¼Œç›´åˆ°æ–°æ—§èŠ‚ç‚¹æœ‰ä¸€ç«¯çš„æŒ‡é’ˆç›¸é‡ï¼ˆè¯´æ˜è¿™ä¸ªç«¯çš„èŠ‚ç‚¹éƒ½è¢«patchè¿‡äº†ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("åœ¨æŒ‡é’ˆç›¸é‡ä»¥åï¼Œè¿˜æœ‰ä¸¤ç§æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µï¼š")]),t._v(" "),a("ol",[a("li",[t._v("æœ‰æ–°èŠ‚ç‚¹éœ€è¦åŠ å…¥ã€‚ å¦‚æœæ›´æ–°å®Œä»¥åï¼Œ"),a("code",[t._v("oldStartIdx > oldEndIdx")]),t._v("ï¼Œè¯´æ˜æ—§èŠ‚ç‚¹éƒ½è¢« "),a("code",[t._v("patch")]),t._v(" å®Œäº†ï¼Œä½†æ˜¯æœ‰å¯èƒ½è¿˜æœ‰æ–°çš„èŠ‚ç‚¹æ²¡æœ‰è¢«å¤„ç†åˆ°ã€‚æ¥ç€ä¼šå»åˆ¤æ–­æ˜¯å¦è¦æ–°å¢å­èŠ‚ç‚¹ã€‚")]),t._v(" "),a("li",[t._v("æœ‰æ—§èŠ‚ç‚¹éœ€è¦åˆ é™¤ã€‚ å¦‚æœæ–°èŠ‚ç‚¹å…ˆpatchå®Œäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šèµ° "),a("code",[t._v("newStartIdx > newEndIdx")]),t._v("  çš„é€»è¾‘ï¼Œé‚£ä¹ˆå°±ä¼šå»åˆ é™¤å¤šä½™çš„æ—§å­èŠ‚ç‚¹ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"ä¸ºä»€ä¹ˆä¸è¦ä»¥indexä½œä¸ºkey"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä¸è¦ä»¥indexä½œä¸ºkey"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä¸è¦ä»¥indexä½œä¸ºkeyï¼Ÿ")]),t._v(" "),a("h3",{attrs:{id:"èŠ‚ç‚¹reverseåœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èŠ‚ç‚¹reverseåœºæ™¯"}},[t._v("#")]),t._v(" èŠ‚ç‚¹reverseåœºæ™¯")]),t._v(" "),a("p",[t._v("å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€æ®µä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("item\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),t._v("\n          v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(num, index) in nums"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"num"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"`item${num}`"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button @click"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("æ”¹å˜"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./vue.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("nums")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("change")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reverse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"num"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n                    <div>\n                       {{num}}\n                    </div>\n                ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"child"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å…¶å®æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„åˆ—è¡¨ç»„ä»¶ï¼Œæ¸²æŸ“å‡ºæ¥ "),a("code",[t._v("1 2 3")]),t._v(" ä¸‰ä¸ªæ•°å­—ã€‚æˆ‘ä»¬å…ˆä»¥ "),a("code",[t._v("index")]),t._v(" ä½œä¸ºkeyï¼Œæ¥è·Ÿè¸ªä¸€ä¸‹å®ƒçš„æ›´æ–°ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ¥ä¸‹æ¥åªå…³æ³¨ "),a("code",[t._v("item")]),t._v(" åˆ—è¡¨èŠ‚ç‚¹çš„æ›´æ–°ï¼Œåœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„è™šæ‹ŸèŠ‚ç‚¹åˆ—è¡¨ "),a("code",[t._v("oldChildren")]),t._v(" ç²—ç•¥è¡¨ç¤ºæ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("åœ¨æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå¯¹æ•°ç»„åš "),a("code",[t._v("reverse")]),t._v(" çš„æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬æ­¤æ—¶ç”Ÿæˆçš„ "),a("code",[t._v("newChildren")]),t._v(" åˆ—è¡¨æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å‘ç°ä»€ä¹ˆé—®é¢˜æ²¡æœ‰ï¼Ÿkeyçš„é¡ºåºæ²¡å˜ï¼Œä¼ å…¥çš„å€¼å®Œå…¨å˜äº†ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),t._v(" "),a("p",[t._v("æœ¬æ¥æŒ‰ç…§æœ€åˆç†çš„é€»è¾‘æ¥è¯´ï¼Œ"),a("code",[t._v("æ—§çš„ç¬¬ä¸€ä¸ªvnode")]),t._v(" æ˜¯åº”è¯¥ç›´æ¥å®Œå…¨å¤ç”¨ "),a("code",[t._v("æ–°çš„ç¬¬ä¸‰ä¸ªvnode")]),t._v("çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±åº”è¯¥æ˜¯åŒä¸€ä¸ªvnodeï¼Œè‡ªç„¶æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯ç›¸åŒçš„ã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯åœ¨è¿›è¡Œå­èŠ‚ç‚¹çš„ "),a("code",[t._v("diff")]),t._v(" è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨ "),a("code",[t._v("æ—§é¦–èŠ‚ç‚¹å’Œæ–°é¦–èŠ‚ç‚¹ç”¨")]),t._v("sameNode"),a("code",[t._v("å¯¹æ¯”ã€‚")]),t._v(" è¿™ä¸€æ­¥å‘½ä¸­é€»è¾‘ï¼Œå› ä¸ºç°åœ¨"),a("code",[t._v("æ–°æ—§ä¸¤æ¬¡é¦–éƒ¨èŠ‚ç‚¹")]),t._v(" çš„ "),a("code",[t._v("key")]),t._v(" éƒ½æ˜¯ "),a("code",[t._v("0")]),t._v("äº†ï¼Œ")]),t._v(" "),a("p",[t._v("ç„¶åæŠŠæ—§çš„èŠ‚ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ª "),a("code",[t._v("vnode")]),t._v(" å’Œ æ–°çš„èŠ‚ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ª "),a("code",[t._v("vnode")]),t._v(" è¿›è¡Œ "),a("code",[t._v("patchVnode")]),t._v(" æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæˆ‘å¯ä»¥å¤§è‡´ç»™ä½ åˆ—ä¸€ä¸‹ï¼š é¦–å…ˆï¼Œæ­£å¦‚æˆ‘ä¹‹å‰çš„æ–‡ç« "),a("a",{attrs:{href:"https://juejin.im/post/6844904113432444942#heading-8",target:"_blank",rel:"noopener noreferrer"}},[t._v("propsçš„æ›´æ–°å¦‚ä½•è§¦å‘é‡æ¸²æŸ“ï¼Ÿ"),a("OutboundLink")],1),t._v("é‡Œæ‰€è¯´ï¼Œåœ¨è¿›è¡Œ "),a("code",[t._v("patchVnode")]),t._v(" çš„æ—¶å€™ï¼Œä¼šå»æ£€æŸ¥ "),a("code",[t._v("props")]),t._v(" æœ‰æ²¡æœ‰å˜æ›´ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œä¼šé€šè¿‡ "),a("code",[t._v("_props.num = 3")]),t._v(" è¿™æ ·çš„é€»è¾‘å»æ›´æ–°è¿™ä¸ªå“åº”å¼çš„å€¼ï¼Œè§¦å‘ "),a("code",[t._v("dep.notify")]),t._v("ï¼Œè§¦å‘å­ç»„ä»¶è§†å›¾çš„é‡æ–°æ¸²æŸ“ç­‰ä¸€å¥—å¾ˆé‡çš„é€»è¾‘ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åï¼Œè¿˜ä¼šé¢å¤–çš„è§¦å‘ä»¥ä¸‹å‡ ä¸ªé’©å­ï¼Œå‡è®¾æˆ‘ä»¬çš„ç»„ä»¶ä¸Šå®šä¹‰äº†ä¸€äº›domçš„å±æ€§æˆ–è€…ç±»åã€æ ·å¼ã€æŒ‡ä»¤ï¼Œé‚£ä¹ˆéƒ½ä¼šè¢«å…¨é‡çš„æ›´æ–°ã€‚")]),t._v(" "),a("ol",[a("li",[t._v("updateAttrs")]),t._v(" "),a("li",[t._v("updateClass")]),t._v(" "),a("li",[t._v("updateDOMListeners")]),t._v(" "),a("li",[t._v("updateDOMProps")]),t._v(" "),a("li",[t._v("updateStyle")]),t._v(" "),a("li",[t._v("updateDirectives")])]),t._v(" "),a("p",[t._v("è€Œè¿™äº›æ‰€æœ‰é‡é‡çº§çš„æ“ä½œï¼ˆè™šæ‹Ÿdomå‘æ˜çš„å…¶ä¸­ä¸€ä¸ªç›®çš„ä¸å°±æ˜¯ä¸ºäº†å‡å°‘çœŸå®domçš„æ“ä½œä¹ˆï¼Ÿï¼‰ï¼Œéƒ½å¯ä»¥é€šè¿‡ç›´æ¥å¤ç”¨ "),a("code",[t._v("ç¬¬ä¸‰ä¸ªvnode")]),t._v(" æ¥é¿å…ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å·æ‡’å†™äº† "),a("code",[t._v("index")]),t._v(" ä½œä¸º "),a("code",[t._v("key")]),t._v("ï¼Œè€Œå¯¼è‡´æ‰€æœ‰çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"èŠ‚ç‚¹åˆ é™¤åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èŠ‚ç‚¹åˆ é™¤åœºæ™¯"}},[t._v("#")]),t._v(" èŠ‚ç‚¹åˆ é™¤åœºæ™¯")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œé™¤äº†ä¼šå¯¼è‡´æ€§èƒ½æŸè€—ä»¥å¤–ï¼Œåœ¨"),a("code",[t._v("åˆ é™¤å­èŠ‚ç‚¹")]),t._v("çš„åœºæ™¯ä¸‹è¿˜ä¼šé€ æˆæ›´ä¸¥é‡çš„é”™è¯¯ï¼Œ")]),t._v(" "),a("p",[t._v("å¯ä»¥çœ‹"),a("a",{attrs:{href:"https://juejin.im/user/1714893868499086",target:"_blank",rel:"noopener noreferrer"}},[t._v("sea_ljf"),a("OutboundLink")],1),t._v("åŒå­¦æä¾›çš„è¿™ä¸ª"),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fancient-moon-427u7",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸€æ®µä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(value, index) in arr"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button @click"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handleDelete"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("arr")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleDelete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<li>{{Math.random()}}</li>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("é‚£ä¹ˆä¸€å¼€å§‹çš„ "),a("code",[t._v("vnodeåˆ—è¡¨")]),t._v("æ˜¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå…¶å®å­ç»„ä»¶å¯¹åº”çš„æ˜¯ç¬¬ä¸€ä¸ª å‡è®¾å­ç»„ä»¶çš„textæ˜¯1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå…¶å®å­ç»„ä»¶å¯¹åº”çš„æ˜¯ç¬¬äºŒä¸ª å‡è®¾å­ç»„ä»¶çš„textæ˜¯2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå…¶å®å­ç»„ä»¶å¯¹åº”çš„æ˜¯ç¬¬ä¸‰ä¸ª å‡è®¾å­ç»„ä»¶çš„textæ˜¯3")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("æœ‰ä¸€ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œæ­£å¦‚æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æ‰€æåˆ°çš„"),a("a",{attrs:{href:"https://juejin.im/post/6844904113432444942#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸ºä»€ä¹ˆè¯´ Vue çš„å“åº”å¼æ›´æ–°æ¯” React å¿«ï¼Ÿ"),a("OutboundLink")],1),t._v("ï¼ŒVue å¯¹äºç»„ä»¶çš„ "),a("code",[t._v("diff")]),t._v(" æ˜¯ä¸å…³å¿ƒå­ç»„ä»¶å†…éƒ¨å®ç°çš„ï¼Œå®ƒåªä¼šçœ‹ä½ åœ¨æ¨¡æ¿ä¸Šå£°æ˜çš„ä¼ é€’ç»™å­ç»„ä»¶çš„ä¸€äº›å±æ€§æ˜¯å¦æœ‰æ›´æ–°ã€‚")]),t._v(" "),a("p",[t._v("ä¹Ÿå°±æ˜¯å’Œv-forå¹³çº§çš„é‚£éƒ¨åˆ†ï¼Œå›é¡¾ä¸€ä¸‹åˆ¤æ–­ "),a("code",[t._v("sameNode")]),t._v(" çš„æ—¶å€™ï¼Œåªä¼šåˆ¤æ–­"),a("code",[t._v("key")]),t._v("ã€ "),a("code",[t._v("tag")]),t._v("ã€"),a("code",[t._v("æ˜¯å¦æœ‰dataçš„å­˜åœ¨ï¼ˆä¸å…³å¿ƒå†…éƒ¨å…·ä½“çš„å€¼ï¼‰")]),t._v("ã€"),a("code",[t._v("æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹")]),t._v("ã€"),a("code",[t._v("æ˜¯å¦æ˜¯ç›¸åŒçš„input type")]),t._v("ï¼Œæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥å¤ç”¨è¿™ä¸ªèŠ‚ç‚¹ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(value, index) in arr"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå£°æ˜çš„å±æ€§")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("æœ‰äº†è¿™äº›å‰ç½®çŸ¥è¯†ä»¥åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œç‚¹å‡»åˆ é™¤å­å…ƒç´ åï¼Œ"),a("code",[t._v("vnode åˆ—è¡¨")]),t._v(" å˜æˆä»€ä¹ˆæ ·äº†ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªè¢«åˆ äº†")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå…¶å®ä¸Šä¸€è½®å­ç»„ä»¶å¯¹åº”çš„æ˜¯ç¬¬äºŒä¸ª å‡è®¾å­ç»„ä»¶çš„textæ˜¯2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå…¶å®å­ç»„ä»¶å¯¹åº”çš„æ˜¯ç¬¬ä¸‰ä¸ª å‡è®¾å­ç»„ä»¶çš„textæ˜¯3")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("è™½ç„¶åœ¨æ³¨é‡Šé‡Œæˆ‘ä»¬è‡ªå·±æ¸…æ¥šçš„çŸ¥é“ï¼Œç¬¬ä¸€ä¸ª "),a("code",[t._v("vnode")]),t._v(" è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯å¯¹äº Vue æ¥è¯´ï¼Œå®ƒæ˜¯æ„ŸçŸ¥ä¸åˆ°å­ç»„ä»¶é‡Œé¢åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„å®ç°ï¼ˆå®ƒä¸ä¼šæ·±å…¥å­ç»„ä»¶å»å¯¹æ¯”æ–‡æœ¬å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ Vue ä¼šæ€ä¹ˆ "),a("code",[t._v("patch")]),t._v(" å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("ç”±äºå¯¹åº”çš„ "),a("code",[t._v("key")]),t._v("ä½¿ç”¨äº† "),a("code",[t._v("index")]),t._v("å¯¼è‡´çš„é”™ä¹±ï¼Œå®ƒä¼šæŠŠ")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("åŸæ¥çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹text: 1")]),t._v("ç›´æ¥å¤ç”¨ã€‚")]),t._v(" "),a("li",[a("code",[t._v("åŸæ¥çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹text: 2")]),t._v("ç›´æ¥å¤ç”¨ã€‚")]),t._v(" "),a("li",[t._v("ç„¶åå‘ç°æ–°èŠ‚ç‚¹é‡Œå°‘äº†ä¸€ä¸ªï¼Œç›´æ¥æŠŠå¤šå‡ºæ¥çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹"),a("code",[t._v("text: 3")]),t._v(" ä¸¢æ‰ã€‚")])]),t._v(" "),a("p",[t._v("è‡³æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ¬åº”è¯¥æŠŠ "),a("code",[t._v("text: 1")]),t._v("èŠ‚ç‚¹åˆ æ‰ï¼Œç„¶å"),a("code",[t._v("text: 2")]),t._v("ã€"),a("code",[t._v("text: 3")]),t._v(" èŠ‚ç‚¹å¤ç”¨ï¼Œå°±å˜æˆäº†é”™è¯¯çš„æŠŠ "),a("code",[t._v("text: 3")]),t._v(" èŠ‚ç‚¹ç»™åˆ æ‰äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä¸ºä»€ä¹ˆä¸è¦ç”¨éšæœºæ•°ä½œä¸ºkey"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä¸è¦ç”¨éšæœºæ•°ä½œä¸ºkey"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä¸è¦ç”¨éšæœºæ•°ä½œä¸ºkeyï¼Ÿ")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("item")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Math.random()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(num, index) in nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":num")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("`item${num}`"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å…¶å®æˆ‘å¬è¿‡ä¸€ç§è¯´æ³•ï¼Œæ—¢ç„¶å®˜æ–¹è¦æ±‚ä¸€ä¸ª "),a("code",[t._v("å”¯ä¸€çš„key")]),t._v("ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç”¨ "),a("code",[t._v("Math.random()")]),t._v(" ä½œä¸º "),a("code",[t._v("key")]),t._v(" æ¥å·æ‡’ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆé¸¡è´¼çš„æƒ³æ³•ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆå§ã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆ "),a("code",[t._v("oldVnode")]),t._v(" æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.6330715699108844")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25104533240710514")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.4114769152411637")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("æ›´æ–°ä»¥åæ˜¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.11046018699748683")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8549799545696619")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("   key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.18674467938937478")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("     num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œ"),a("code",[t._v("key")]),t._v(" å˜æˆäº†å®Œå…¨å…¨æ–°çš„ 3 ä¸ªéšæœºæ•°ã€‚")]),t._v(" "),a("p",[t._v("ä¸Šé¢è¯´åˆ°ï¼Œ"),a("code",[t._v("diff")]),t._v(" å­èŠ‚ç‚¹çš„é¦–å°¾å¯¹æ¯”å¦‚æœéƒ½æ²¡æœ‰å‘½ä¸­ï¼Œå°±ä¼šè¿›å…¥ "),a("code",[t._v("key")]),t._v(" çš„è¯¦ç»†å¯¹æ¯”è¿‡ç¨‹ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨æ—§èŠ‚ç‚¹çš„ "),a("code",[t._v("key -> index")]),t._v(" çš„å…³ç³»å»ºç«‹ä¸€ä¸ª "),a("code",[t._v("map")]),t._v(" æ˜ å°„è¡¨ï¼Œç„¶åç”¨æ–°èŠ‚ç‚¹çš„ "),a("code",[t._v("key")]),t._v(" å»åŒ¹é…ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯ï¼Œå°±ä¼šè°ƒç”¨ "),a("code",[t._v("createElm")]),t._v(" æ–¹æ³• "),a("strong",[t._v("é‡æ–°å»ºç«‹")]),t._v(" ä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚")]),t._v(" "),a("p",[t._v("å…·ä½“ä»£ç åœ¨è¿™ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// å»ºç«‹æ—§èŠ‚ç‚¹çš„ key -> index æ˜ å°„è¡¨\noldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n\n// å»æ˜ å°„è¡¨é‡Œæ‰¾å¯ä»¥å¤ç”¨çš„ index\nidxInOld = findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n// ä¸€å®šæ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå› ä¸ºæ–°èŠ‚ç‚¹çš„ key æ˜¯éšæœºç”Ÿæˆçš„ã€‚\nif (isUndef(idxInOld)) {\n  // å®Œå…¨é€šè¿‡ vnode æ–°å»ºä¸€ä¸ªçœŸå®çš„å­èŠ‚ç‚¹\n  createElm();\n}\nå¤åˆ¶ä»£ç \n")])])]),a("p",[t._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œå’±ä»¬çš„è¿™ä¸ªæ›´æ–°è¿‡ç¨‹å¯ä»¥è¿™æ ·æè¿°ï¼š "),a("code",[t._v("123")]),t._v(" -> å‰é¢é‡æ–°åˆ›å»ºä¸‰ä¸ªå­ç»„ä»¶ -> "),a("code",[t._v("321123")]),t._v("  -> åˆ é™¤ã€é”€æ¯åé¢ä¸‰ä¸ªå­ç»„ä»¶ -> "),a("code",[t._v("321")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å‘ç°é—®é¢˜äº†å§ï¼Ÿè¿™æ˜¯æ¯ç­æ€§çš„ç¾éš¾ï¼Œåˆ›å»ºæ–°çš„ç»„ä»¶å’Œé”€æ¯ç»„ä»¶çš„æˆæœ¬ä½ ä»¬æ™“å¾—çš„ä¼â€¦â€¦æœ¬æ¥ä»…ä»…æ˜¯å¯¹ç»„ä»¶ç§»åŠ¨ä½ç½®å°±å¯ä»¥å®Œæˆçš„æ›´æ–°ï¼Œè¢«æˆ‘ä»¬æ¯æˆè¿™æ ·äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),a("p",[t._v("ç»è¿‡è¿™æ ·çš„ä¸€æ®µæ—…è¡Œï¼Œ"),a("code",[t._v("diff")]),t._v(" è¿™ä¸ªåºå¤§çš„è¿‡ç¨‹å°±ç»“æŸäº†ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬æ”¶è·äº†ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("ol",[a("li",[t._v("ç”¨ç»„ä»¶å”¯ä¸€çš„ "),a("code",[t._v("id")]),t._v("ï¼ˆä¸€èˆ¬ç”±åç«¯è¿”å›ï¼‰ä½œä¸ºå®ƒçš„ "),a("code",[t._v("key")]),t._v("ï¼Œå®åœ¨æ²¡æœ‰çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨è·å–åˆ°åˆ—è¡¨çš„æ—¶å€™é€šè¿‡æŸç§è§„åˆ™ä¸ºå®ƒä»¬åˆ›å»ºä¸€ä¸ª "),a("code",[t._v("key")]),t._v("ï¼Œå¹¶ä¿è¯è¿™ä¸ª "),a("code",[t._v("key")]),t._v(" åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¿æŒç¨³å®šã€‚")]),t._v(" "),a("li",[t._v("å¦‚æœä½ çš„åˆ—è¡¨é¡ºåºä¼šæ”¹å˜ï¼Œåˆ«ç”¨ "),a("code",[t._v("index")]),t._v(" ä½œä¸º "),a("code",[t._v("key")]),t._v("ï¼Œå’Œæ²¡å†™åŸºæœ¬ä¸Šæ²¡åŒºåˆ«ï¼Œå› ä¸ºä¸ç®¡ä½ æ•°ç»„çš„é¡ºåºæ€ä¹ˆé¢ å€’ï¼Œindex éƒ½æ˜¯ "),a("code",[t._v("0, 1, 2")]),t._v(" è¿™æ ·æ’åˆ—ï¼Œå¯¼è‡´ Vue ä¼šå¤ç”¨é”™è¯¯çš„æ—§å­èŠ‚ç‚¹ï¼Œåšå¾ˆå¤šé¢å¤–çš„å·¥ä½œã€‚åˆ—è¡¨é¡ºåºä¸å˜ä¹Ÿå°½é‡åˆ«ç”¨ï¼Œå¯èƒ½ä¼šè¯¯å¯¼æ–°äººã€‚")]),t._v(" "),a("li",[t._v("åƒä¸‡åˆ«ç”¨éšæœºæ•°ä½œä¸º "),a("code",[t._v("key")]),t._v("ï¼Œä¸ç„¶æ—§èŠ‚ç‚¹ä¼šè¢«å…¨éƒ¨åˆ æ‰ï¼Œæ–°èŠ‚ç‚¹é‡æ–°åˆ›å»ºï¼Œä½ çš„è€æ¿ä¼šè¢«ä½ æ°”æ­»ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"åé©³æ ‡é¢˜ä¹‹å‰-è¯·å…ˆçœ‹è¿™æ®µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åé©³æ ‡é¢˜ä¹‹å‰-è¯·å…ˆçœ‹è¿™æ®µ"}},[t._v("#")]),t._v(" åé©³æ ‡é¢˜ä¹‹å‰ï¼Œè¯·å…ˆçœ‹è¿™æ®µ")]),t._v(" "),a("p",[t._v("è¿™ç¯‡æ–‡ç« å‘å¸ƒä»¥åï¼Œå¾ˆå¤šå°ä¼™ä¼´æå‡ºäº†è‡ªå·±çš„å»ºè®®å’Œä¼˜åŒ–ã€‚ä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤šäººåœ¨è¯„è®ºåŒºè¯´ï¼Œæ—¢ç„¶ "),a("code",[t._v("index")]),t._v(" åªæ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹ä¼šå‡ºé—®é¢˜ï¼Œé‚£ "),a("code",[t._v("åˆ—è¡¨é¡ºåºä¿æŒä¸å˜")]),t._v(" çš„æƒ…å†µä¸‹è¿˜æ˜¯å¯ä»¥æ¥ç€ç”¨ã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ")]),t._v(" "),a("ol",[a("li",[t._v("å›¢é˜Ÿä»£ç è§„èŒƒï¼Œå‡è®¾è¿™æ ·ä¸€ä¸ªåœºæ™¯å§ï¼Œä½ è¿™è¾¹ä»£ç é‡Œå…¨éƒ¨å†™çš„ "),a("code",[t._v(':key="index"')]),t._v("ï¼Œæœ‰ä¸€ä¸ªæ–°äººå…¥èŒäº†è·Ÿç€å†™ï¼Œç»“æœä»–çš„åœºæ™¯æ˜¯åˆ é™¤å’Œä¹±åºçš„ï¼Œè¿™ç§æƒ…å†µä½ ä¸€ä¸ªä¸ªè®²åŸç†æŒ‡æ­£ï¼Ÿè¿™å°±æ˜¯ç»Ÿä¸€ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µçš„ä½œç”¨å•Šã€‚"),a("code",[t._v("eslint")]),t._v(" ç”šè‡³ä¹Ÿä¸“é—¨æœ‰ä¸€ä¸ª "),a("code",[t._v("rule")]),t._v(" å«åš "),a("code",[t._v("react/no-array-index-key")]),t._v("ï¼Œä¸ºä»€ä¹ˆè¦æœ‰è¿™äº›çº¦æŸå’Œè§„èŒƒï¼Ÿå¦‚æœç¤¾åŒºæ€»ç»“äº†æœ€ä½³å®è·µï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦å»æ‰“ç ´å®ƒï¼Ÿè¿™éƒ½æ˜¯å€¼å¾—æ€è€ƒçš„ã€‚ å°±åƒ "),a("code",[t._v("==")]),t._v(" æ“ä½œç¬¦ï¼Œä¸ºä»€ä¹ˆè¦ç¦æ­¢ï¼Ÿå°±æ˜¯å› ä¸ºéšå¼è½¬æ¢ä¼šå‡ºå¾ˆå¤šé—®é¢˜ï¼Œä½ è¯´ä½ ç†ŸèƒŒéšå¼è½¬æ¢æ‰€æœ‰åŸç†ï¼Œä½ èƒ½ä¿è¯å›¢é˜Ÿæ‰€æœ‰å°ä¼™ä¼´éƒ½ç†ŸèƒŒï¼Ÿä½•è‹¦æœ‰æ›´ç®€å•çš„ "),a("code",[t._v("===")]),t._v(" æ“ä½œç¬¦å¯ä»¥ç”¨ã€‚")]),t._v(" "),a("li",[t._v("è¯´å¼€å‘æ•ˆç‡çš„é—®é¢˜ï¼Œ"),a("code",[t._v("index")]),t._v(" ä½œä¸º "),a("code",[t._v("key")]),t._v(" æˆ‘åœ¨ä¸Šé¢å·²ç»æåˆ°äº†å¥½å‡ ç§ä¼šå‡ºé—®é¢˜çš„æƒ…å†µäº†ï¼Œè¿˜æ˜¯åšæŒè¦ç”¨ï¼Œå°±å› ä¸ºç®€å•ã€‚é‚£ä¹ˆ "),a("code",[t._v("TypeScript")]),t._v(" ä¹Ÿæ²¡æœ‰ç«èµ·æ¥çš„å¿…è¦å—ï¼Ÿå®ƒéœ€è¦å¤šå†™å¾ˆå¤šä»£ç ï¼Œâ€œæ•ˆç‡â€ å¾ˆä½ï¼Œä¸ºä»€ä¹ˆå®ƒç«äº†ï¼Ÿä¸æ˜¯å› ä¸ºç”¨ "),a("code",[t._v("JavaScript")]),t._v(" å°±ä¸€å®šä¼šå‡ºç°ç±»å‹é”™è¯¯ï¼Œè€Œæ˜¯å› ä¸ºç”¨äº† "),a("code",[t._v("TypeScript")]),t._v(" å¯ä»¥æ›´å¥½çš„ä¿è¯ä½ ä»£ç çš„ç¨³å®šæ€§ã€‚æ­£å¦‚ç”¨äº† "),a("code",[t._v("id")]),t._v(" ä½œä¸ºkeyï¼Œå¯ä»¥æ¯” "),a("code",[t._v("index")]),t._v(" æ›´å¥½çš„ä¿è¯ç¨³å®šæ€§ï¼Œæ›´ä½•å†µç”¨ "),a("code",[t._v("id")]),t._v(" ä¹Ÿä¸è´¹äº‹å•Šã€‚å®Œå…¨éƒ½ä¸åƒ "),a("code",[t._v("TypeScript")]),t._v(" å¸¦æ¥çš„é¢å¤–çš„è¯­æ³•æˆæœ¬ã€‚")]),t._v(" "),a("li",[t._v("æ‰€è°“çš„åˆ—è¡¨é¡ºåºç¨³å®šï¼Œè¿™ä¸ªç¨³å®šä½ çœŸçš„èƒ½ä¿è¯å—ï¼Ÿé™¤äº†ä½ å‰ç«¯å†™æ­»çš„æ°¸è¿œä¸å˜çš„ä¸€ä¸ªåˆ—è¡¨ï¼Œå°±å‡è®¾ä½ çš„åˆ—è¡¨æ²¡æœ‰åœ¨å¤´éƒ¨"),a("code",[t._v("æ–°å¢ä¸€é¡¹")]),t._v("ï¼ˆå¯¼è‡´èŠ‚ç‚¹å…¨éƒ¨ä¾æ¬¡é”™è¯¯å¤ç”¨ï¼‰ï¼Œåœ¨ä»»æ„ä½ç½® "),a("code",[t._v("åˆ é™¤ä¸€é¡¹")]),t._v("ï¼ˆæœ‰æ—¶å¯¼è‡´é”™è¯¯åˆ é™¤ï¼‰ç­‰è¿™äº›ä¼šå¯¼è‡´ "),a("code",[t._v("patch")]),t._v(" è¿‡ç¨‹å‡ºç°é—®é¢˜çš„æ“ä½œã€‚ å°±ä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œä½ çš„â€œé™æ€â€åˆ—è¡¨çš„é¡ºåºæ˜¯"),a("code",[t._v("[1, 2, 3]")]),t._v("ï¼Œæ•°æ®åº“é‡Œçªç„¶åŠ å…¥äº†ä¸€æ¡æ–°æ•°æ®"),a("code",[t._v("0")]),t._v("ï¼Œé‚£ä¹ˆä½ è®¤ä¸ºçš„ä¸ä¼šå˜çš„åˆ—è¡¨çš„å°±å˜æˆäº†"),a("code",[t._v("[0, 1, 2, 3]")]),t._v("ã€‚ç„¶åï¼Œ"),a("code",[t._v("1")]),t._v(" èŠ‚ç‚¹å°±é”™è¯¯çš„å’Œ "),a("code",[t._v("0")]),t._v("èŠ‚ç‚¹è¿›è¡Œ "),a("code",[t._v("patchVnode")]),t._v("ï¼Œ "),a("code",[t._v("2")]),t._v(" èŠ‚ç‚¹å°±é”™è¯¯çš„å’Œ "),a("code",[t._v("1")]),t._v(" èŠ‚ç‚¹è¿›è¡Œ "),a("code",[t._v("patch")]),t._v("ã€å¯¼è‡´åŸæœ¬åªéœ€è¦æŠŠæ–°å¢çš„"),a("code",[t._v("0")]),t._v("èŠ‚ç‚¹æ’å…¥åˆ°å¤´éƒ¨ï¼Œç„¶ååˆ†åˆ«å¯¹ "),a("code",[t._v("1 -> 1")]),t._v("ã€"),a("code",[t._v("2 -> 2")]),t._v("ã€"),a("code",[t._v("3 -> 3")]),t._v(" è¿›è¡Œ "),a("code",[t._v("patchVnode")]),t._v("å³å¯ï¼ˆåŸºæœ¬æ²¡æœ‰å˜åŒ–ï¼‰ï¼Œå˜æˆäº†æ¯ç­çš„"),a("code",[t._v("å…¨é‡æ›´æ–°")]),t._v("ã€‚ï¼ˆå¦‚æœå­ç»„ä»¶æ˜¯ä¸ªå¾ˆé‡çš„ç»„ä»¶å‘¢ï¼Ÿå®ƒçš„æ¯ä¸€é¡¹éƒ½ä¼šç»å†å®Œæ•´çš„ "),a("code",[t._v("vm._update(vm._render())")]),t._v("ï¼‰è¿‡ç¨‹ï¼Œå› ä¸º "),a("code",[t._v("props")]),t._v(" å˜äº†ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);